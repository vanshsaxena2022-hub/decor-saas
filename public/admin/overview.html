<h2>Overview</h2>

<div class="grid">
  <div class="card">
    Total Products
    <div class="num" id="totalProducts">0</div>
  </div>

  <div class="card">
    Visitors (7 days)
    <div class="num" id="visitors">0</div>
  </div>

  <div class="card">
    WhatsApp Enquiries
    <div class="num" id="whatsapp">0</div>
  </div>
</div>

<style>
.grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 16px;
}

.card {
  background: #fff;
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 2px 6px rgba(0,0,0,.08);
  font-size: 14px;
}

.num {
  margin-top: 8px;
  font-size: 28px;
  font-weight: bold;
}
</style>

<script>
const shopId = localStorage.getItem("shop_id");

/* Total products */
fetch("/api/products?shop=" + shopId)
  .then(r => r.json())
  .then(products => {
    document.getElementById("totalProducts").innerText = products.length;
  });

/* Analytics */
fetch("/api/analytics?shop=" + shopId + "&range=7")
  .then(r => r.json())
  .then(a => {
    document.getElementById("visitors").innerText = a.visitors;
    document.getElementById("whatsapp").innerText = a.whatsapp;
  });
</script>
